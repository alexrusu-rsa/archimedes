<div class="dialog-container">
  <mat-dialog-content *ngIf="currentUser && this.user === null">
    <mat-card-title>Add User</mat-card-title>
    <form [formGroup]="addUserForm!">
      <mat-form-field appearance="fill">
        <mat-label>User Surname</mat-label>
        <input
          matInput
          [(ngModel)]="currentUser.surname"
          type="text"
          formControlName="surname"
          required="true"
        />
        <mat-hint
          style="color: red"
          *ngIf="surname?.touched && !surname?.dirty"
        >
          User surname is required
        </mat-hint>
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>User Name</mat-label>
        <input
          matInput
          [(ngModel)]="currentUser.name"
          formControlName="name"
          type="text"
          required="true"
        />
        <mat-hint style="color: red" *ngIf="name?.touched && !name?.dirty">
          User name is required
        </mat-hint>
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>User Email</mat-label>
        <input
          matInput
          [(ngModel)]="currentUser.email"
          formControlName="email"
          type="text"
          required="true"
        />
        <mat-hint style="color: red" *ngIf="email?.touched && !email?.dirty">
          User email is required
        </mat-hint>
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>User Password</mat-label>
        <input
          matInput
          [(ngModel)]="currentUser.password"
          formControlName="password"
          type="password"
          required="true"
        />
        <mat-hint
          style="color: red"
          *ngIf="password?.touched && !password?.dirty"
        >
          User password is required
        </mat-hint>
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>User Role</mat-label>
        <input
          matInput
          [(ngModel)]="currentUser.role"
          type="text"
          formControlName="role"
        />
        <mat-hint style="color: red" *ngIf="role?.touched && !role?.dirty">
          User role is required
        </mat-hint>
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>User Seniority </mat-label>
        <input
          matInput
          [(ngModel)]="currentUser.seniority"
          type="text"
          formControlName="seniority"
        />
        <mat-hint
          style="color: red"
          *ngIf="seniority?.touched && !seniority?.dirty"
        >
          User role is required
        </mat-hint>
      </mat-form-field>
    </form>
    <button
      *ngIf="this.user === null"
      color="primary"
      mat-raised-button
      (click)="addUser(); dialogClose()"
    >
      Add user
    </button>
  </mat-dialog-content>

  <!-- EDIT -->
  <mat-dialog-content *ngIf="currentUser && this.user !== null">
    <mat-card-title>Update user</mat-card-title>
    <form [formGroup]="addUserForm!">
      <mat-form-field appearance="fill">
        <mat-label>User Surname</mat-label>
        <input
          matInput
          [(ngModel)]="currentUser.surname"
          type="text"
          formControlName="surname"
          required="true"
        />
        <mat-hint
          style="color: red"
          *ngIf="surname?.touched && !surname?.dirty"
        >
          User surname is required
        </mat-hint>
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>User Name</mat-label>
        <input
          matInput
          [(ngModel)]="currentUser.name"
          formControlName="name"
          type="text"
          required="true"
        />
        <mat-hint style="color: red" *ngIf="name?.touched && !name?.dirty">
          User name is required
        </mat-hint>
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>User Email</mat-label>
        <input
          matInput
          [(ngModel)]="currentUser.email"
          formControlName="email"
          type="text"
          required="true"
        />
        <mat-hint style="color: red" *ngIf="email?.touched && !email?.dirty">
          User email is required
        </mat-hint>
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>User Password</mat-label>
        <input
          matInput
          [(ngModel)]="currentUser.password"
          formControlName="password"
          type="password"
          required="true"
        />
        <mat-hint
          style="color: red"
          *ngIf="password?.touched && !password?.dirty"
        >
          User password is required
        </mat-hint>
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>User Role</mat-label>
        <input
          matInput
          [(ngModel)]="currentUser.role"
          type="text"
          formControlName="role"
        />
        <mat-hint style="color: red" *ngIf="role?.touched && !role?.dirty">
          User role is required
        </mat-hint>
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>User Seniority </mat-label>
        <input
          matInput
          [(ngModel)]="currentUser.seniority"
          type="text"
          formControlName="seniority"
        />
        <mat-hint
          style="color: red"
          *ngIf="seniority?.touched && !seniority?.dirty"
        >
          User role is required
        </mat-hint>
      </mat-form-field>
    </form>
    <button
      *ngIf="this.user !== null"
      mat-raised-button
      color="primary"
      (click)="editUser(); dialogClose()"
    >
      Update user
    </button>
  </mat-dialog-content>
</div>
